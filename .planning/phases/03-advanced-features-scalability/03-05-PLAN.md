---
phase: 03-advanced-features-scalability
plan: 05
type: execute
wave: 3
depends_on: ["03-03"]
files_modified:
  - src/components/InsightsSidebar.tsx
  - src/components/AISummary.tsx
  - src/components/RecommendedActions.tsx
  - src/components/KeyTopics.tsx
  - app/editor/page.tsx
autonomous: true
must_haves:
  truths:
    - "AI Insights sidebar appears with three sections: AI Summary, Recommended Actions, Key Topics"
    - "AI Summary shows generated summary text (from existing feature)"
    - "Recommended Actions displays checklist items (mock data)"
    - "Key Topics shows extracted tags from transcript"
  artifacts:
    - path: "src/components/InsightsSidebar.tsx"
      provides: "Complete insights sidebar with all three sections"
      exports: "InsightsSidebar"
      min_lines: 100
    - path: "src/components/AISummary.tsx"
      provides: "AI summary display component"
      exports: "AISummary"
      min_lines: 30
    - path: "src/components/RecommendedActions.tsx"
      provides: "Checklist of recommended actions"
      exports: "RecommendedActions"
      min_lines: 40
    - path: "src/components/KeyTopics.tsx"
      provides: "Tag cloud of key topics"
      exports: "KeyTopics"
      min_lines: 30
    - path: "app/editor/page.tsx"
      provides: "Integration of insights sidebar"
      contains: "InsightsSidebar"
  key_links:
    - from: "src/components/InsightsSidebar.tsx"
      to: "src/components/AISummary.tsx"
      via: "import and render"
      pattern: "import.*AISummary"
    - from: "app/editor/page.tsx"
      to: "src/components/InsightsSidebar.tsx"
      via: "import and render"
      pattern: "<InsightsSidebar"
---

<objective>
Build the AI Insights sidebar for the Editor page, containing AI Summary, Recommended Actions, and Key Topics sections as shown in the UI mock.

Purpose: Provide users with AI‑generated insights about the transcript, helping them quickly identify key information and actionable items.
Output: Fully styled insights sidebar integrated into Editor page, using existing AI summary and adding new components for actions and topics.
</objective>

<execution_context>
@~/.opencode/get-shit-done/workflows/execute-plan.md
@~/.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-advanced-features-scalability/03-CONTEXT.md
@.planning/phases/03-advanced-features-scalability/03-03-SUMMARY.md (after 03-03 completes)

# Existing AI summary feature
@src/lib/transcription/commands.ts (generateSummary)
@src/components/Transcription.tsx (AI summary usage)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AI Summary component</name>
  <files>src/components/AISummary.tsx</files>
  <action>
    Create a dedicated component for displaying the AI‑generated summary:

    1. **Props:** Accept `summary: string | null` and `loading?: boolean`
    2. **Design matching mock:**
       - Header: "AI Summary" with "Generated" badge
       - Content box: `bg-slate-900/40 rounded-xl p-4 border border-slate-border/50`
       - Text: `text-sm text-slate-300 leading-relaxed`
    3. **Loading state:** Show skeleton or "Generating..."
    4. **Empty state:** If no summary, show "No summary available"
    5. **Use existing summary generation:** The component does NOT generate summary itself; it only displays.
    6. **Export:** `export function AISummary({ summary, loading }: { summary: string | null, loading?: boolean })`

    This component will be reused inside InsightsSidebar.
  </action>
  <verify>
    - Component renders summary text with proper styling
    - Loading state appears when `loading=true`
    - Empty state appears when `summary` is null
  </verify>
  <done>AISummary component ready for integration.</done>
</task>

<task type="auto">
  <name>Task 2: Create Recommended Actions component</name>
  <files>src/components/RecommendedActions.tsx</files>
  <action>
    Build a checklist component for AI‑recommended actions:

    1. **Props:** Accept `actions: Array<{ id: string, title: string, description: string, completed: boolean }>`
    2. **Design matching mock:**
       - Each action item: `bg-slate-900/40 p-3 rounded-xl border border-slate-border/50`
       - Checkbox: square with border, turns indigo when completed
       - Title: `text-[13px] font-medium text-slate-200` (line‑through if completed)
       - Description: `text-[10px] text-slate-500 mt-1`
       - Hover effect: `hover:border-indigo-primary/30`
    3. **Checkbox behavior:** Clicking toggles `completed` state (local state only, not persisted)
    4. **Mock data:** Provide default actions if none supplied (use mock from UI: "Review Sarah's portfolio links", "Share UX principles summary", "Schedule follow‑up interview")
    5. **Header:** "Recommended Actions" with "Add Task" button (non‑functional)
    6. **Export:** `export function RecommendedActions({ actions }: { actions?: Action[] })`

    This component will be used inside InsightsSidebar.
  </action>
  <verify>
    - Component renders three action items with checkboxes
    - Clicking checkbox toggles completed state (visual feedback)
    - Hover effects work
    - Styling matches mock (padding, borders, typography)
  </verify>
  <done>RecommendedActions component ready with interactive checkboxes.</done>
</task>

<task type="auto">
  <name>Task 3: Create Key Topics component and integrate InsightsSidebar</name>
  <files>src/components/KeyTopics.tsx, src/components/InsightsSidebar.tsx, app/editor/page.tsx</files>
  <action>
    1. **Create `KeyTopics.tsx`:**
       - Props: `topics: string[]`
       - Render each topic as a tag: `px-2 py-1 rounded-md bg-slate-800 border border-slate-700 text-[11px] text-slate-300`
       - Layout: `flex flex-wrap gap-2`
       - Header: "Key Topics"
       - Export component

    2. **Create `InsightsSidebar.tsx`:**
       - Combine all three sections (AI Summary, Recommended Actions, Key Topics) into a sidebar layout
       - Width: `w-[360px]` (matches mock)
       - Scrollable: `overflow-y-auto custom-scrollbar`
       - Header: icon `auto_awesome` + "AI Insights"
       - Accept props: `summary`, `actions`, `topics`
       - Render each section with appropriate spacing
       - Export component

    3. **Extract key topics from transcript:**
       - Write a simple function `extractKeyTopics(transcript: string): string[]` that:
         - Splits text into words
         - Filters out stop words (common English words)
         - Counts noun frequency (simple heuristic: words longer than 4 chars)
         - Returns top 5‑7 unique words as topics
       - Place this function in `src/lib/transcription/insights.ts`

    4. **Update Editor page:**
       - Import `InsightsSidebar`
       - Replace insights placeholder with `<InsightsSidebar ... />`
       - Pass `summary` (from existing AI summary generation), `actions` (mock data), `topics` (extracted from transcript)
       - Generate AI summary using existing `generateSummary` function (already used in Phase 2)
       - Show loading states while generating

    Ensure the insights sidebar looks identical to the mock, with proper spacing and styling.
  </action>
  <verify>
    - Insights sidebar appears with three sections
    - AI Summary shows actual generated summary (or placeholder)
    - Recommended Actions shows three interactive checklist items
    - Key Topics displays extracted tags from transcript
    - Sidebar is scrollable and fits within 360px width
  </verify>
  <done>Insights sidebar fully implemented and integrated into Editor page.</done>
</task>

</tasks>

<verification>
After completing all tasks:
1. Open Editor page with a transcript‑loaded recording
2. Verify AI Insights sidebar appears with all three sections
3. Confirm AI Summary shows real generated summary (if API key available) or placeholder
4. Toggle checkboxes in Recommended Actions – visual feedback works
5. Key Topics show extracted words from transcript
6. Sidebar matches mock styling (colors, spacing, borders)
</verification>

<success_criteria>
- [ ] AI Insights sidebar displays three sections (AI Summary, Recommended Actions, Key Topics)
- [ ] AI Summary shows generated summary text (or placeholder)
- [ ] Recommended Actions checklist is interactive (checkboxes toggle)
- [ ] Key Topics shows at least 3 extracted tags from transcript
- [ ] Sidebar width is 360px, scrollable, matches mock design
</success_criteria>

<output>
After completion, create `.planning/phases/03-advanced-features-scalability/03-05-SUMMARY.md`
</output>